How to build a release:

From checked-out source directory...

First, setup environment variables:

	CVS_RSH=ssh; export CVS_RSH
	CVSROOT=:ext:esniper@cvs.esniper.sourceforge.net:/cvsroot/esniper
	export CVSROOT
	# change these to whatever is current
	MAJOR=2
	MINOR=3
	STEP=0
	PREV=2.2.0
	# these don't change
	CURRENT=$MAJOR.$MINOR.$STEP
	CURRFILE=esniper-$MAJOR-$MINOR-$STEP
	CURRTAG=Version_${MAJOR}_${MINOR}_${STEP}

Tag source:

	cvs tag -F $CURRTAG

Create a directory:

	mkdir $CURRENT

Copy Changes and Notes from the previous build:

	cp $PREV/Changes $PREV/Notes $CURRENT

Create source tar:

	cd $CURRENT
	mkdir $CURRFILE
	cp ../Makefile ../COPYRIGHT ../README ../TODO ../*.[ch] $CURRFILE
	cp ../sample*.txt ../esniper.ds* ../esniper.mak $CURRFILE
	cp ../esniper.1 ../esniper_man.html $CURRFILE
	tar cvf - $CURRFILE | gzip >$CURRFILE.tgz

	(note: ensure Makefile is same as in CVS - not Sun version!)

Edit Changes and Notes (change version # for source file in Notes):

	vi Changes Notes

Build esniper on Sun, and HP and Cygwin, strip and copy to release directory:

	Sun:
		make
		strip esniper
		mv esniper $CURRENT/esniper-solaris-sparc

	Linux:
		cd esniper
		rcp sparky:esniper/\*.[ch] sparky:esniper/Makefile .
		# ensure Makefile has Sun dependencies turned off
		make clean all
		strip esniper
		rcp esniper sparky:esniper/$CURRENT/esniper-linux-x86

	Cygwin:
		cd esniper
		rcp sparky:esniper/\*.[ch] sparky:esniper/Makefile .
		# ensure Makefile has Sun dependencies turned off
		make clean all
		strip esniper.exe
		rcp esniper.exe sparky:esniper/$CURRENT/esniper-cygwin.exe

	Windows:
		cd esniper
		rcp sparky:esniper/*.[ch] sparky:esniper/esniper.mak .
		nmake /f esniper.mak
		rcp -b Release/esniper.exe sparky:esniper/$CURRENT/esniper.exe

	ftp upload.sourceforge.net -> anonymous
		cd incoming
		bin
		prompt
		mput esniper*
		put ../sample_auction.txt sample_auction.txt
		put ../sample_config.txt sample_config.txt

Build other versions on sourceforge:

	scp $CURRFILE.tgz esniper@shell.sf.net:

	ssh -l esniper cf.sourceforge.net
		<enter password>

	On the first system:
		scp shell.sourceforge.net:$CURRFILE.tgz .
		gunzip <$CURRFILE.tgz | tar xvf -
		rm -rf esniper
		ln -s $CURRFILE esniper

	(note: CURRFILE isn't defined, you must expand it yourself)
	(note: Cannot rely on CVS being up-to-date on internal sf systems)

	For each build system:
		makeit

Then login to shell.sourceforge.net:

	ssh -l esniper shell.sourceforge.net
		<enter password>
	mkdir $CURRENT
	mv esniper-* $CURRENT
		(note: not quite correct - don't move dir/tgz)
	cd $CURRENT
	ftp upload
		(log in as anonymous)
		cd incoming
		bin
		prompt
		mput esniper*
	vi $PROJECT/htdocs/index.html
		change tgz file to current release (two places)

Go to www.sourceforge.net:
	- login
	- go to project
	- click on admin, then file releases, then add release
	- type in release number and click "create this release"
	- cut/paste notes and changes, ensure "preserve text" is selected
	- select files to import
	- mark each type (one at a time...)
	- click "send notice"

Send email to esniper-announce@lists.sourceforge.net to announce the
new version.

And you're done...
